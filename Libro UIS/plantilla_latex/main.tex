\input{Anexos/LATEX/source/structure.tex}
\addbibresource{Anexos/LATEX/source/bib/referenciasejemplo.bib}

% \usepackage{showframe}
\usepackage{lipsum}
\usepackage{CJKutf8}

%%% FOR URLs WORK ============================
\PassOptionsToPackage{hyphens}{url}
\usepackage{hyperref}
\expandafter\def\expandafter\UrlBreaks\expandafter{\UrlBreaks% save the current one
	\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j%
	\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t%
	\do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D%
	\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N%
	\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X%
	\do\Y\do\Z\do\*\do\-\do\~\do\'\do\"\do\-}%
% ==================================================


\title{DETECCIÓN AUTOMÁTICA DEL NIVEL DE ESTRATIFICACIÓN SOCIOECONÓMICO URBANO USANDO REDES NEURONALES CONVOLUCIONALES SOBRE IMÁGENES SATELITALES CON INFORMACIÓN AUMENTADA}
\author{DANIEL ALCIDES CARVAJAL PATIÑO}

\legend{TRABAJO DE GRADO PARA OPTAR POR EL TITULO DE INGENIERIA DE SISTEMAS}
\director{FABIO MARTINEZ CARRILLO\\Ph.D. EN INGENIERÍA DE SISTEMAS Y COMPUTACIÓN}
\directortitle{Codirector\\Ph.D RAUL RAMOS POLLAN}
\institution {UNIVERSIDAD INDUSTRIAL DE SANTANDER}
\faculty {FACULTAD DE INGENIERIAS FISICOMECANICAS\\{ESCUELA DE INGENIERIA DE SISTEMAS E INFORMÁTICA}}
\city{BUCARAMANGA}
\date{2018}



\begin{document}


	\onehalfspace
	\maketitle
%    % para incluir la nota y/o autorización de uso de datos
	\chapter*{ESPACIO PARA NOTA}
    \newpage
    \chapter*{ESPACIO PARA CARTA AUTORIZACIÓN USO DE DATOS}
    \newpage
	\tableofcontents
	\newpage \listoffigures
	\newpage \listoftables

	\setlength{\parskip}{\baselineskip} % cambia el espacio entre parrafos
%%	\setcounter{\thecharter}{2}

%% ===========================
%% RESUMEN
%% ===========================

	\newpage\chapter*{RESUMEN}
    \textbf{TITULO:} DETECCIÓN AUTOMÁTICA DEL NIVEL DE ESTRATIFICACIÓN SOCIOECONÓMICO URBANO USANDO REDES NEURONALES CONVOLUCIONALES SOBRE IMÁGENES SATELITALES CON INFORMACIÓN AUMENTADA.
    
    \textbf{AUTORES:} DANIEL ALCIDES CARVAJAL PATIÑO.
    
    \textbf{PALABRAS CLAVE:} DANE, Machine learning, Deep Learning, Red Neuronal Convolucional, .	
    
    \textbf{DESCRIPCION:} 
    
    La finalidad de este proyecto de grado, es continuar con la investigación  que el grupo Conuss ha venido desarrollando durante varios semestres en la creación de una infraestructura nube para la comunidad estudiantil, que permita su uso para el desarrollo de otros proyectos e investigaciones.
    
    Debido a la necesidad de crear diplomados y laboratorios virtuales de computación para fomentar el avance en la formación de ingenieros de calidad, se decide utilizar soluciones de código abierto que permitan el fácil acceso y administración de los servidores físicos y virtualización. Entre las muchas soluciones, se decide optar por OpenStack gracias a su amplia gama de módulos y su abundante comunidad por el cual es respaldado, a su vez, integrando docker como solución para la creación de contenedores.
    
    Todo esto con el fin de que la comunidad estudiantil tenga acceso a recursos de computo que no están al alcance de sus manos, otorgándoles la capacidad de conocer, además de disfrutar, las nuevas tecnologías que hoy por hoy están mejorando y automatizando los procesos de las grandes industrias tecnológicas.
 
 %% =============================
 %% ABSTRACT
 %% =============================   
  
	\newpage\chapter*{ABSTRACT}
    \textbf{TITLE:} AUTOMATIC DETECTION OF THE URBAN SOCIOECONOMIC STRATIFICATION LEVEL USING CONVOLUTIONAL NEURAL NETWORKS ON SATELLITE IMAGES WITH INCREASED INFORMATION.
    
    \textbf{AUTHORS:} DANIEL ALCIDES CARVAJAL PATIÑO.
    
    \textbf{KEYWORDS:} Container, Cloud Computing, OpenStack, modules and services.
    
    \textbf{DESCRIPTION:} 
    
    The purpose of this thesis is to continue with the research that the Conuss group has incorporated during several semesters in the creation of an infrastructure for the student community that allows its use for the development of other projects and research.
    
    Due to the need to create certified courses and virtual computer labs to promote the advancement in the training of quality engineers, it is decided to use open source solutions that allow easy access and administration of physical servers and virtualization. Among the many solutions, it is decided to opt for OpenStack thanks to its wide range of modules and its abundant community for which it is backed, in turn, integrating docker as a solution for the creation of containers.
    
    All this in order that the student community has access to computing resources that are not available to them, that they can know as well as enjoy the new technologies that are improving today and automating the processes of the large technological industries.
    
%% =======================
%% INTRODUCCION
%% =======================
\newpage\chapter*{INTRODUCCION}

La medición del nivel económico de una zona urbana, actualmente, conlleva un trabajo extenso, como lo expresa el DANE, “en el caso de las revisiones generales urbanas, así como en la estratificación rural se apoya en censos de vivienda” \footnote{DANE. Estratificación - Preguntas frecuentes. [en línea]. <\url{https://www.dane.gov.co/files/geoestadistica/Preguntas_frecuentes_estratificacion.pdf}> [citado en 25 de mayo de 2018]}. Es decir, se requiere la elaboración de una encuesta de gran tamaño, la cual consume mucho tiempo y personal. Posteriormente, si la encuesta no se realizó usando software de recolección de datos, es necesario realizar su tipeo, lo cual también requiere tiempo. Luego, como lo indica el DANE \footnote{DANE. Metodología de estratificación. [en línea]. <\url{http://www.dane.gov.co/index.php/servicios-al-ciudadano/servicios-de-informacion/estratificacion-socioeconomica}> [citado en 25 de mayo de 2018].} \footnote{DANE. Procedimiento del cálculo. [en línea]. <\url{http://www.dane.gov.co/files/geoestadistica/estratificacion/procedimientoDeCalculo.pdf}> [citado en 25 de mayo de 2018].}, el cálculo final del estrato se realiza mediante modelos estadísticos y económicos especialmente calibrados para esta tarea.
    
En este contexto surgen varias interrogantes respecto a la capacidad de actualización de esta metodología: ¿Qué sucede cuando una ciudad tiene una alta tasa de desarrollo urbano?, ¿Cómo mantiene el gobierno actualizada la información de los estratos ante estas circunstancias?, ¿Que tan efectiva es la metodología actual ante estos casos de alto desarrollo urbano?
   
Por tanto, el objetivo de este trabajo consiste en seleccionar redes neuronales convolucionales y evaluar su capacidad para determinar automáticamente el estrato socioeconómico usando imágenes satelitales e información adicional (información catastral, presencia y consumo de servicios, etc.), con el fin de presentar una alternativa que haga frente a las inquietudes planteadas.
    
No es la primera vez que se realiza una predicción del nivel socioeconómico utilizando técnicas de machine learning o Deep learning. Neal Jean en colaboración con varias personas e instituciones realizó un modelo \footnote{NEAL jean. Combining satellite imagery and machine learning to predict poverty. [en Línea]. <\url{http://sustain.stanford.edu/predicting-poverty/}> [citado en 25 de mayo de 2018]} \footnote{NEAL jean. Combining satellite imagery and machine learning to predict poverty. [en línea]. <\url{https://github.com/nealjean/predicting-poverty}> [citado en 25 de Mayo de 2018]} \footnote{NEAL Jean, MARSHALL Burke, † MICHAEL Xie, W. Matthew Davis, DAVID B. Lobell, STEFANO Ermon. Combining satellite imagery and machine learning to predict poverty. Science 353 (6301), p. 790-794. 2016} capaz de predecir el nivel de pobreza en cinco países de África, usando imágenes satelitales y datos extra para dicha tarea. En Colombia, más específicamente en Medellín, también se han realizado modelos \footnote{EAFIT. Con imágenes satelitales miden los índices de pobreza en Medellín. [en línea]. <\url{http://www.eafit.edu.co/investigacion/revistacientifica/edicion-167/Paginas/con-imagenes-satelitales-miden-los-indices-de-pobreza-en-medellin.aspx}> [citado en 25 de mayo de 2018]} para determinar niveles socioeconómicos de una zona urbana. En la Universidad EAFIT, usando técnicas de Machine Learning e imágenes satelitales logran medir los índices de pobreza de dicha ciudad.
    
    
\addcontentsline{toc}{chapter}{INTRODUCCION}
    
%% =================================
%% OBJETIVOS
%% =================================
    
\newpage\chapter{OBJETIVOS} 

	\section{OBJETIVO GENERAL}
		\begin{enumerate}
		\item Seleccionar y evaluar redes convolucionales para la determinación del nivel socio económico urbano mediante el uso de imágenes satelitales e información adicional.
		\end{enumerate}

	\section{OBJETIVOS ESPECIFICOS}
	    \begin{enumerate}
	      \item Identificar fuentes de datos de imágenes satelitales e información adicional.
	      \item Diseñar y construir datasets integrando los datos obtenidos de las fuentes identificadas.
	      \item Seleccionar entre distintas arquitecturas de redes neuronales convolucionales existentes en la literatura y repositorios tecnológicos    .
	      \item Entrenar las redes convolucionales probando configuraciones de datasets.
	      \item Evaluar el desempeño de las redes convolucionales con el uso de los distintos dataset. 
	      \item Elegir la mejor configuración tanto de red convolucional como de conjunto de datos, teniendo en cuenta el desempeño obtenido.   
	    \end{enumerate}

%% =========================
%% 2. MARCO TEORICO
%% =========================

\newpage\chapter{MARCO TEÓRICO}    
     
	%% =========================
    %% 2.1 ESTRATIFICACION SOCIAL
    %% =========================
    
	\section{ESTRATIFICACIÓN SOCIAL}
    
    “La estratificación social es un fenómeno presente en todas las sociedades. Los miembros se clasifican a sí mismos y a los otros basándose en jerarquías que vienen dadas por diversos factores”
    \footnote[8]{GONZÁLEZ Vanessa. ¿Qué es la estratificación social? [en línea]. <\url{https://www.lifeder.com/estratificacion-social/}> [citado en 31 de mayo del 2018].} y no es algo nuevo, la antigua Mesopotamia contaba con una división social cuyos miembros iban desde el rey y su familia, en el estrato más alto, hasta los esclavos en el más bajo.
    
    Más que una simple división, la estratificación representa la desigualdad existente en una sociedad. Cada uno de los estratos, niveles o grupos sociales indica la capacidad de acceso a recursos, oportunidades, bienes y servicios por parte de las personas pertenecientes a cada nivel. Dicha estratificación es necesaria para la tarea que llevan a cabo los gobiernos en contra de la desigualdad, dado que se suelen crear programas que beneficien a las personas de los niveles más bajos y cobrar mayores impuestos a las personas de los niveles más altos.
    
    En el caso de Colombia, se maneja una estratificación de 6 niveles.

	\leftskip1em
	\rightskip\leftskip
	{\footnotesize \hspace{\parindent} “De éstos 6, los estratos 1, 2 y 3 corresponden a estratos bajos que albergan a los usuarios con menores recursos, los cuales son beneficiarios de subsidios en los servicios públicos domiciliarios; los estratos 5 y 6 corresponden a estratos altos que albergan a los usuarios con mayores recursos económicos, los cuales deben pagar sobrecostos (contribución) sobre el valor de los servicios públicos domiciliarios. El estrato 4 no es beneficiario de subsidios, ni debe pagar sobrecostos, paga exactamente el valor que la empresa defina como costo de prestación del servicio.”\footnote[9]{DANE, Estratificación - Preguntas frecuentes. Op. cit., p. 1.}}
	
	\leftskip0em
	\rightskip0em
    Dicha estratificación no es tarea fácil. Se requiere gran cantidad de variables por cada vivienda, como las características de la zona en la que se ubica, el tamaño, materiales en que fue fabricada, entre otras. Lo que conlleva a una tarea de recolección de datos bastante amplia.
    
    %% ================================
    %% MACHINE LEARNING
    %% ================================
    
    \section{MACHINE LEARNING}
    
    \leftskip1em
    \rightskip\leftskip
    {\footnotesize \hspace{\parindent}
    “Machine learning es una disciplina científica del ámbito de la Inteligencia Artificial que crea sistemas que aprenden automáticamente. Aprender en este contexto quiere decir identificar patrones complejos en millones de datos. La máquina que realmente aprende es un algoritmo que revisa los datos y es capaz de predecir comportamientos futuros. Automáticamente, también en este contexto, implica que estos sistemas se mejoran de forma autónoma con el tiempo, sin intervención humana.”\footnote[10]{GONZÁLEZ  Andrés. ¿Qué es Machine Learning? [en línea]. (Recuperado en 10 oct 2017) \url{http://cleverdata.io/que-es-machine-learning-big-data/}}}

    \leftskip0em
    \rightskip0em
    Se han llevado muchos desarrollos y avances en distintos campos usando técnicas de machine learning. Uno de las más recientes y populares fue la máquina de Google AlphaGo que venció al mejor jugador a nivel mundial de GO, Ke Jie. Wikipedia usa técnicas de machine learning para detectar saboteos en su enciclopedia. Otros usos de machine learning consisten en la detección de objetos, patrones o enfermedades incluso predicción de tráfico urbano y precios de bienes.
    
    Aunque en el fondo, independientemente del campo en el que se trabaje, las técnicas de machine learning son las mismas, existen tareas mucho más complejas que otras. Por ejemplo, hoy en día, es mucho más fácil predecir el valor de una casa que predecir el valor del dólar. Esta dificultad se debe a que cada tarea requiere “ajustar” los datos y los algoritmos para que se puedan realizar predicciones o detecciones con un nivel de tolerancia aceptable.
    
    \subsection{REDES NEURONALES} es una de las técnicas o algoritmos de machine learning que se pueden emplear en las tareas de predicción o detección. “Una red neuronal es un modelo simplificado que emula el modo en que el cerebro humano procesa la información: Funciona simultaneando un número elevado de unidades de procesamiento interconectadas que parecen versiones abstractas de neuronas”\footnote[11]{IBM. El modelo de redes neuronales [en línea]. <\url{https://www.ibm.com/support/knowledgecenter/es/SS3RA7_18.0.0/modeler_mainhelp_client_ddita/components/neuralnet/neuralnet_model.html> [citado en 31 de Mayo de 2018]} }
    
  
  \figura{img/red.jpg}{Diagrama de red neuronal}{0.8}{VÍLCHEZ GARCÍA, Víctor Gabriel.\textit{Estimación y clasificación de daños en materiales utilizando modelos AR y redes neuronales para la evaluaciónno destructiva con ultrasonidos.} [en linea]. (Recuperado en 24 may 2018) \url{http://ceres.ugr.es/~alumnos/esclas/}}

  Una red neuronal está constituida por una serie de capas que se activan con determinadas entradas generando determinadas salidas que podrían ser tomadas o no por otras capas, dependiendo de la “profundidad” de la red. Utilizar redes neuronales consiste en hacer que la misma aprenda examinando las entradas, prediciendo las salidas y haciendo ajustes a los distintos parámetros de la misma, este proceso se repite muchas veces hasta que la red sea capaz de predecir o clasificar con un margen de error tolerable.
  
  La idea del proyecto es obtener la configuración de una red neuronal que sea capaz de predecir el nivel socioeconómico de una zona urbana, para esto se planea alimentar la red con imágenes satelitales e información extra de dichas zonas urbanas. Con esta información, ajustes en los parámetros y bastantes iteraciones la red neuronal aprenderá. Los cambios en los parámetros, profundidad y datos usados en la red neuronal son realizados para encontrar la configuración de red neuronal que mejor desempeño presente para la tarea propuesta. Dado que los datos a utilizar son imágenes, es recomendable utilizar “redes neuronales convolucionales” (CNN), las cuales son un tipo de red neuronal que se adapta mejor al uso de imágenes dado que “las CNN eliminan la necesidad de una extracción de características manual, por lo que no es necesario identificar las características utilizadas para clasificar las imágenes. La CNN funciona mediante la extracción de características directamente de las imágenes. Las características relevantes no se entrenan previamente; se aprenden mientras la red se entrena con una colección de imágenes”\footnote[12]{MATHWORKS. Aprendizaje profundo [en línea]. <\url{https://es.mathworks.com/discovery/deep-learning.html}> [citado en 31 de Mayo de 2018]}
  
%% ==========================================
%% DESARROLLO DEL PROYECTO
%% ========================================== 
 
\newpage\chapter{DESARROLLO DEL PROYECTO} 

Está claro que la recolección de datos mediante encuestas a vivienda es una metodología que conlleva bastante tiempo y que el cálculo del estrato debe tener en cuenta un sin número de variables. Como alternativa se propone usar imágenes satelitales dado que se puede obtener mucha información socioeconómica con el análisis de las mismas. Se pueden identificar patrones, detectar construcciones específicas, clasificar materiales de construcción en los tejados y más, todos estos análisis son variables usadas en el cálculo del estrato.
  
Como se mencionó existe un par de trabajos sobre el nivel socioeconómico usando técnicas de machine learning. El trabajo de Neal Jean usa redes neuronales convoluciones y Transfer Learning para lograr una predicción de la pobreza en 5 países de áfrica. El trabajo de la EAFIT usa técnicas de machine learning para detectar características que puedan dar a conocer el nivel socioeconómico de una zona. Hay que tener en cuenta que en ambos trabajos la principal fuente de datos son las imágenes satelitales.
 
A grandes rasgos lo que se planteó realizar con las imágenes satelitales, la información aumentada, la información de los estratos y las redes neuronales, se muestra en las siguientes figuras.

\figura{img/datos.png}{Datos a usar en el proyecto}{0.7} {}
\figura{img/modelo.png}{Modelo a usar en el proyecto}{0.8}{}

El proyecto se desarrolló encontrando fuentes de datos, generando dataset con imágenes satelitales, información aumentada y distintos niveles de zoom, seleccionando redes neuronales y realizando pruebas para determinar la mejor manera de predecir el estrato social. Hay que mencionar que el desarrollo del proyecto está documentado en el siguiente repositorio de GitHub \url{https://github.com/DaielChom/proyecto_uis}. El desarrollo se llevó de la siguiente manera.

%% ==========================================
%% FUENTES DE DATOS
%% ==========================================
 
 \section{FUENTES DE DATOS}
 
 Era necesario tener imágenes satelitales, imágenes con los estratos sociales e imágenes con información extra que correspondan geográficamente y que tengan distintos niveles de zoom, como se muestran en la Figura \ref{fig:Datos a usar en el proyecto}. Se usan distintos niveles de zoom para determinar si esto influye en la predicción del estrato social. Existen muchas plataformas para obtener imágenes satelitales tanto de alta como baja resolución, varias de estas plataformas tienen la opción de insertar información en dichos mapas en forma de marcador, polígono o línea. Esta información por lo general son archivos en formato kml o shp. Gracias a la política de datos abiertos\footnote[13]{GOBIERNO DIGITAL. Datos Abiertos [en linea] <\url{http://estrategia.gobiernoenlinea.gov.co/623/w3-article-9407.html}> [citado en 30 de Mayo de 2018]} es posible encontrar archivos kml o shp en distintas páginas web del gobierno. sin embargo no todos los departamentos o ciudades cuentan con la misma cantidad de datos disponibles y menos con datos del estrato social. El único portal web donde se encontró una buena cantidad de información, incluyendo la del estrato social fue en el portal de mapas de Bogotá, disponible en \url{http://mapas.bogota.gov.co}.
 
 No fue posible descargar los archivos kml mostrados en la plataforma, por ende, y aprovechando la licencia Creative Commons que presentan los datos, se crearon nuevos archivos kml usando los mapas de la plataforma como guía. Los archivos kml realizados están disponibles en \url{https://drive.google.com/open?id=15VnvN6ZRTbsqqd9kl3ukNWBj3oqADsy0}. se crearon dos kml, uno con información de los estratos sociales y otro con los índices de condiciones de seguridad nocturna por localidad que tienen las mujeres, mas específicamente los datos de la categoría \textit{riesgo alto} de dicho mapa. 

%% ==========================================
%% DATASET
%% ==========================================

 \section{DATASET}
 Como en la mayoría de trabajos de machine learning se debe tener un dataset, un conjunto de datos organizados y con una estructura dividida en train (datos para entrenamiento) y test (datos para pruebas) con los cuales se entrena o prueba un algoritmo de aprendizaje. El dataset que se construyó lleva por nombre OVERLAECOBO y cuenta con 3 tipos imágenes (Figura \ref{fig:Datos a usar en el proyecto}) geográficamente correspondidas y de distintos niveles de zoom o acercamiento satelital. Las imágenes del dataset fueron obtenidas usando el software Ruso SASplanet\footnote[14]{Disponible en http://www.sasgis.org/}, los archivos kml diseñados y \textit{Bing maps} como fuente de imágenes satelitales, fuente ofrecida en SASplanet. Se tomo el mapa de Bogotá y se trazó una línea que dividiera la ciudad en dos partes, de tal manera que en ambas hubiera información de todos los estratos, una parte se escogió para train y otra la para test, como se muestra en la siguiente imagen.
 
 \figura{img/train-test.png}{Division de Train y Test}{0.3}{}
 
  Se extrajeron imágenes de 7 Zooms diferentes, del 13 al 20,  cada nivel de zoom cuenta con imágenes satelitales, de información extra (Riesgo nocturno para las mujeres) y de estrato social. Cada nivel está dividido en train y test. OVERLAECOBO cuenta con la siguiente estructura.
 
 \figura{img/estructura.png}{Estrucutra OVERLAECOBO}{0.2}{}
 Una vez el dataset estuvo elaborado se prosiguió con la búsqueda de redes neuronales y posteriormente pruebas para determinar la mejor configuración para la detección del estrato social.
 
%% ==========================================
%% REDES NEURONALES
%% ==========================================

\section{REDES NEURONALES}
Hay que mencionar que la metodología que se usó para la detección del estrato social se conoce en machine learning como Segmentación Semántica (Figura \ref{fig:Segmentación Semantica}), la cual consiste en segmentar una imagen con el fin de delimitar un objeto o diferenciar entre elementos. En Segmentación semántica, en el proceso de entrenamiento se tienen dos imágenes, la imagen que se quiere segmentar (Xtrain) y la imagen segmentada (ytrain) y con estas se realiza el aprendizaje. En el proceso de pruebas con imágenes que se requieren segmentar (Xtest) se crea una nueva imagen segmentada, luego en el proceso de medición del error con las imágenes segmentadas creadas se comparan con las imágenes segmentadas de dataset (ytest). En otras palabras, cada pixel RGB de una imagen tiene su propia etiqueta. La segmentación semántica es una técnica muy utilizada en el campo de la conducción autónoma, ya que representa una buena metodología para descubrir los distintos objetos que percibe la cámara del vehículo y así tomar decisiones.
  
  \figura{img/segmentacion.jpg}{Segmentación Semantica}{0.9}{ABHIJIT Kundu, VIBHAV Vineet, and VLANDLEN Koltun Feature Space Optimization for Semantic Video Segmentation [en linea] <\url{http://vladlen.info/publications/feature-space-optimization-for-semantic-video-segmentation/} [citado en 01 de junio de 2018]}
  
Existe muchas redes neuronales convolucionales con las que se puede aplicar Segmentación semántica, entre ellas SegNet, uNet y AlexNet. En GitHub hay varios repositorios con implementaciones de estas redes; como es de esperarse estos repositorios, aunque implementen la misma red neuronal, tienen varias diferencias; implementados en distintos lenguajes, usan diferentes librerías e incluso entrenan con diferentes dataset, sin embargo, cumplen la tarea de Segmentación semántica que proponen. Tras una búsqueda y selección entre varios repositorios para seleccionar la mejor red neuronal o la mejor implementación se encontró un Framework que permite usar distintas redes neuronales para la misma tarea. Dicho framework está disponible en el siguiente enlace \url{https://github.com/GeorgeSeif/Semantic-Segmentation-Suite} y es el que se usó para las pruebas.
  
\section{DETECCION DEL ESTRATO SOCIAL}

Se utilizaron 3 niveles de ZOOM para las pruebas y de cada nivel 2 configuraciones, \textit{SIMPLE} y \textit{COMPOUND} (satelital, satelital + informacion aumentada) y para cada configuacion se realizaron 11 pruebas variando la red neuronal y los parametros \textit{epoch} y \textit{batch size}. En total se realizaron 66 pruebas. 

\begin{table}[H]
		\begin{minipage}{1\textwidth}
			\caption[Interfaces]{ \raggedright Pruebas realizadas por cada configuracion de dataset}
			\label{tabla:interfaces}
			\begin{center}
				%	%	%	%	Acá va la tabla como tal
				\begin{tabular}{@{}llll@{}}
					\toprule
					\multicolumn{3}{c}{Pruebas} &            \\ \cmidrule(r){1-4}
					    N°	& RED 1 & EPOCH & BATCH SIZE \\
					    1   & FC-DenseNet56 & 50 & 1 \\
						2   & FC-DenseNet56 & 70 & 1\\
					    3   & Encoder-Decoder & 70 & 1\\
					    4   & Encoder-Decoder & 70 & 2\\
					    5   & Encoder-Decoder-Skip & 70&1 \\
					    6   & Encoder-Decoder-Skip & 70 &2\\
					    7   & FRRN-A & 70 &1\\
					    8   & MobileUNet & 70 &1 \\
					    9   & MobileUNet & 70 &2\\
					    10  & MobileUNet-Skip & 70 &1 \\
                    	11	& MobileUNet-Skip & 70 &2 \\\bottomrule
					\end{tabular} \\
			\end{center} %\vspace{0.1em}
		\end{minipage}
	\end{table}
	
 una vez realizado el entrenamientos de cada red neuronal se midie la capacidad de cada una para peredeccir el estrato social (generar las imagenes \textit{LABEL}) utilizando el indice de jaccard, mas conocido como  \textit{IoU  - Interseccion over Union}, una metrica\footnote[14]{ROSEBROCK Adrian. Intersection over Union (IoU) for object detection [en linea] <\url{https://www.pyimagesearch.com/2016/11/07/intersection-over-union-iou-for-object-detection/}> [citado en 17 de Julio de 2018]} muy utilizada en la deteccion de objetos y la segmentacion. El indice de jaccard consiste en encontrar el grado de similitud entre dos conjuntos, en este caso entre dos imagenes, calculando el cociente entre la interseccion y union de los dos conjuntos. En el caso de segmentacion semantica se usan las areas cubierta por cada clase en las iamgenes para calcular dicho coeficiente, esto se explica mejor en la siguiente imagen. 

\figura{img/iou.png}{Ecuacion IoU}{0.5}{ROSEBROCK Adrian. Intersection over Union (IoU) for object detection [en linea] <\url{https://www.pyimagesearch.com/2016/11/07/intersection-over-union-iou-for-object-detection/} [citado en 17 de julio de 2018]} 

Cada red entrenada genero una cantidad de imagenes equivalente a las de \textit{test} del dataset con el que se entreno. Con estas imagenes generadas y las imagenes del dataset se calculo el indice de jaccard para cada una de las 66 pruebas. Como se mencionó dichos procesos se pueden observar en el repositorio del proyecto. \url{https://github.com/DaielChom/proyecto_uis/}

\figura{img/metrica.png}{Ejemplo de prediccion}{0.6}{}

\begin{table}[htb]
	\begin{minipage}{1\textwidth}
		\caption[Interfaces]{ \raggedright Resultados de cada entrenamiento}
			\label{tabla:interfaces}
			\begin{center}
			%	%	%	%	Acá va la tabla como tal			
				\begin{tabular}{@{}lll|lll|lll@{}}
				\toprule
				\multicolumn{8}{c}{Pruebas} &            \\ \cmidrule(r){1-9}
					Prueba& Duración (s) & IoU & Prueba& Duración (s) & IoU &  Prueba& Duración (s) & IoU  \\
					1 & 1696 & - & 23 & 3029 & - & 45 & 6768 & -\\
					2 & 1860 & - & 24 & 3510 & - & 46 & 9545 & -\\
					3 & 1910 & - & 25 & 3468 & - & 47 & 9305 & -\\
					4 & 1705 & - & 26 & 3038 & - & 48 & 9659 & - \\
					5 & 2480 & - & 27 & 4523 & - & 49 & 11346 & -\\
					6 & 1984 & - & 28 & 3229 & - & 50 & 7780 & -\\
					7 & 2591 & - & 29 & 4272 & - & 51 & 11429 & -\\
					8 & 1083 & - & 30 & 2267 & - & 52 & 6996 & -\\
					9 & 1137 & - & 31 & 2016 & - & 53 & 6559 & -\\
					10 & 934 & - & 32 & 2209 & - & 54 & 7733 & -\\
					11 & 917 & - & 33 & 2142 & - & 55 & 6629 & -\\
					12 & 1345 & - & 34 & 2524 & - & 56 & 7151 & -\\
					13 & 1993 & - & 35 & 3510 & - & 57 & 9542 & -\\
					14 & 1962 & - & 36 & 4518 & - & 58 & 9672 & -\\
					15 & 2052 & - & 37 & 3231 & - & 59 & 7877 & -\\
					16 & 2088 & - & 38 & 3467 & - & 60 & 9527 & -\\
					17 & 1706 & - & 39 & 3110 & - & 61 & 8212 & -\\
					18 & 1677 & - & 40 & 3793 & - & 62 & 11611 & -\\
					19 & 900 & - & 41 & 2914 & - & 63 & 7125 & -\\
					20 & 810 & - & 42 & 2216 & - & 64 & 6547 & -\\
					21 & 1357 & - & 43 & 2256 & - & 65 & 7763 & -\\
					22 & 876 & - & 44 & 2160 & - & 66 & 7119 & -\\

				\end{tabular} \\				
			\end{center} %\vspace{0.1em}
		\end{minipage}
	\end{table}
	
 
\section{LA MEJOR CONFIGURACION}
  
   asd 

%% ===============================================
%% CONCLUSIONES
%% ===============================================  

\newpage\chapter{CONCLUSIONES} 
    
    
   
    
            
  
    
         
     
     
     
  
      
      	
      
     
      
      
      
      
    
  

    

    
    
    

    
    
    
   
        
   
   
   
 
    
    
    
     
    \newpage\chapter{RECOMENDACIONES Y TRABAJO FUTURO}
    
    
    
    
    \newpage\chapter{LIMITACIONES Y PROBLEMAS} 
    
    
    
    
%% ==============================
%% BIBLIOGRAFIA
%% ==============================


    
\newpage\chapter*{BIBLIOGRAFIA}

DANE. Estratificación - Preguntas frecuentes. [en línea]. <\url{https://www.dane.gov.co/files/geoestadistica/Preguntas_frecuentes_estratificacion.pdf}> [citado en 25 de Mayo de 2018]
    
DANE. Metodología de estratificación. [en línea].
 <\url{http://www.dane.gov.co/index.php/servicios-al-ciudadano/servicios-de-informacion/estratificacion-socioeconomica}> [citado en 25 de Mayo de 2018]

DANE. Procedimiento del cálculo. [en línea].
 <\url{http://www.dane.gov.co/files/geoestadistica/estratificacion/procedimientoDeCalculo.pdf}>.
 [citado en 25 de Mayo de 2018].
 
NEAL jean. Combining satellite imagery and machine learning to predict poverty. [en Linea]. <\url{http://sustain.stanford.edu/predicting-poverty/}> [citado en 25 de Mayo de 2018].

NEAL jean. Combining satellite imagery and machine learning to predict poverty. [en linea]. <\url{https://github.com/nealjean/predicting-poverty}> [citado en 25 de Mayo de 2018]

NEAL Jean, MARSHALL Burke, † MICHAEL Xie, W. Matthew Davis, DAVID B. Lobell, STEFANO Ermon. Combining satellite imagery and machine learning to predict poverty. Science 353 (6301), p. 790-794. 2016

EAFIT. Con imágenes satelitales miden los índices de pobreza en Medellín. [en linea]. <\url{http://www.eafit.edu.co/investigacion/revistacientifica/edicion-167/Paginas/con-imagenes-satelitales-miden-los-indices-de-pobreza-en-medellin.aspx}> [citado en 25 de Mayo de 2018]

GONZÁLEZ Vanessa. ¿Qué es la estratificación social? [en línea]. <\url{https://www.lifeder.com/estratificacion-social/}> [citado en 31 de Mayo del 2018].

IBM. El modelo de redes neuronales [en línea]. <\url{https://www.ibm.com/support/knowledgecenter/es/SS3RA7_18.0.0/modeler_mainhelp_client_ddita/components/neuralnet/neuralnet_model.html> [citado en 31 de Mayo de 2018]}

MATHWORKS. Aprendizaje profundo [en línea]. <\url{https://es.mathworks.com/discovery/deep-learning.html}> [citado en 31 de Mayo de 2018]

GOBIERNO DIGITAL. Datos Abiertos [en linea] <\url{http://estrategia.gobiernoenlinea.gov.co/623/w3-article-9407.html}> [citado en 30 de Mayo de 2018]

\end{document}